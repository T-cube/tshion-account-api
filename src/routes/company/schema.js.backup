import { getUserId } from '../../../lib/utils';

export let companySanitization = {
	type: "object",
	properties: {
	  name: { type: "string" },
	  description: { type: "string" },
	  members: {
			type: 'array',
			def: [],
			optional: true,
			items: {
				type: 'object',
				properties: {
					_id: { $objectId: 1 },
					name: { type: "string" },
			    mobile: { type: "string" },
			    birthdate: { type: "date" },
			    joindate: { type: "date" },
			    email: { $email: 1 },
			    address: { type: "string" },
			    sex: { type: "string" }
				}
			}
		},
	  structure: {
			type: 'object',
			properties: {
				_id: { $objectId: 1 },
				name: { type: 'string' },
		    positions: {
					type: 'array',
					items: { type: 'string' }
				},
		    members: {
					type: 'array',
					items: {
						_id: { $objectId: 1 },
			      title: { type: 'string' }
					}
		    },
		    children: {
					type: 'array',
					items: {
						type: 'object',
						properties: {
							_id: { $objectId: 1 },
							name: { type: 'string' },
					    positions: {
								type: 'array',
								items: { type: 'string' }
							},
						}
					}
				},
			}
		},
	  projects: {
			type: 'array',
			items: { $objectId: 1 }
		},
	}
};

export let companyValidation = {
	type: "object",
	properties: {
	  name: { type: "string" },
	  description: { type: "string" },
	  logo: { type: "string" },
	  owner: { $objectId: 1 },
	  members: {
			type: 'array',
			items: {
				type: 'object',
				properties: {
					_id: { $objectId: 1 },
					name: { type: "string" },
			    mobile: { type: "string" },
			    birthdate: { type: "date" },
			    joindate: { type: "date" },
			    email: { $email: 1 },
			    address: { type: "string" },
			    sex: { $enum: ['M', 'F'] }
				}
			}
		},
	  structure: {
			type: 'object',
			properties: {
				_id: { $objectId: 1 },
				name: { type: 'string' },
		    positions: {
					type: 'array',
					items: { type: 'string' }
				},
		    members: {
					type: 'array',
					items: {
						_id: { $objectId: 1 },
			      title: { type: 'string' }
					}
		    },
		    children: {
					type: 'array',
					items: {
						type: 'object',
						properties: {
							_id: { $objectId: 1 },
							name: { type: 'string' },
					    positions: {
								type: 'array',
								items: { type: 'string' }
							},
						}
					}
				},
			}
		},
	  projects: {
			type: 'array',
			items: { $objectId: 1 }
		},
	}
};
